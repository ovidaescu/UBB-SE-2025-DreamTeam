<Page
    x:Class="DuolingoNou.Views.ShellPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DuolingoNou.Views"
    xmlns:pages="using:DuolingoNou.Views.Pages"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <NavigationView x:Name="NavView"
                    IsBackEnabled="False"
                    IsSettingsVisible="True"
                    PaneDisplayMode="Left"
                    PaneTitle="Duo"
                    OpenPaneLength="313"
                    CompactPaneLength="32"
                    SelectionChanged="NavView_SelectionChanged">

        <NavigationView.MenuItems>
            <NavigationViewItem Content="Profile" Icon="Contact" Tag="Profile">
                <NavigationViewItem.MenuItems>

                   <!-- SEARCH BAR WITH RESULTS DROPDOWN -->
                    <StackPanel>
                        <TextBox x:Name="SearchBox"
                                 PlaceholderText="Search"
                                 Width="313"
                                 VerticalAlignment="Center"
                                 Margin="0,0,6,0"
                                 TextChanged="SearchButton_Click"/>

                        <!-- Search results dropdown -->
                        <ListView x:Name="SearchResultsList"
                                  HorizontalAlignment="Stretch" 
                                  MinWidth="313"
                                  Visibility="Collapsed"
                                  Background="White"
                                  BorderThickness="1"
                                  BorderBrush="Gray"
                                  MaxHeight="150">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Padding="5">
                                        <!-- Profile Image -->
                                        <Ellipse Width="32" Height="32" VerticalAlignment="Center">
                                            <Ellipse.Fill>
                                                <ImageBrush ImageSource="{Binding ProfileImage}" Stretch="UniformToFill"/>
                                            </Ellipse.Fill>
                                        </Ellipse>
                                        <!-- User Name -->
                                        <TextBlock Text="{Binding UserName}" VerticalAlignment="Center" Width="60"/>
                                        <!-- Add Friend Button -->
                                        <Button Content="Add" 
                                                Click="AddFriendButton_Click"
                                                DataContext="{Binding}"
                                                VerticalAlignment="Center"
                                                Background="LightGray"
                                                Margin="10,0,0,0"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>

                    <!-- Navigation Items -->
                    <NavigationViewItem Content="Home Page" Icon="Home" Tag="HomePage" />
                    <NavigationViewItem Content="Stats" Tag="Stats">
                        <NavigationViewItem.Icon>
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE9D2;" />
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem Content="Leaderboards" Icon="People" Tag="Leaderboards" />
                    <NavigationViewItem Content="Settings" Icon="Setting" Tag="Settings" />

                </NavigationViewItem.MenuItems>
            </NavigationViewItem>

            <!-- Other Main Items -->
            <NavigationViewItem Content="Courses" Icon="Library" Tag="Courses" />
            <NavigationViewItem Content="Quiz" Icon="Help" Tag="Quiz" />
        </NavigationView.MenuItems>

        <Frame x:Name="ContentFrame" />
    </NavigationView>
</Page>
